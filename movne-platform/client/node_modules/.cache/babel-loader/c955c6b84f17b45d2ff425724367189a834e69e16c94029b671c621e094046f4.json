{"ast":null,"code":"var _jsxFileName = \"/workspaces/movne-platform/movne-platform/client/src/EnhancedTranscript.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './EnhancedTranscript.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst regulatoryQuestions = [\"האם חל שינוי במצבך הכלכלי?\", \"האם יש צורך בנזילות כספית שונה?\", \"האם אתה מודע לכך שקיימת לי זיקה לנכס זה?\"\n// ניתן להוסיף שאלות נוספות\n];\nfunction EnhancedTranscript() {\n  _s();\n  const [isRecording, setIsRecording] = useState(false);\n  const [transcript, setTranscript] = useState([]);\n  const [currentSpeaker, setCurrentSpeaker] = useState(\"Advisor\"); // \"Advisor\" or \"Client\"\n  const recognitionRef = useRef(null);\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn(\"Web Speech API is not supported in this browser.\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = false; // מחכים לתוצאות סופיות\n    recognition.lang = 'he-IL';\n    recognition.onresult = event => {\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        if (event.results[i].isFinal) {\n          const text = event.results[i][0].transcript.trim();\n          const timestamp = new Date();\n          const regulatory = regulatoryQuestions.some(q => text.includes(q));\n          const newLine = {\n            text,\n            speaker: currentSpeaker,\n            timestamp,\n            regulatory\n          };\n          setTranscript(prev => [...prev, newLine]);\n        }\n      }\n    };\n    recognition.onerror = e => console.error(\"Speech recognition error:\", e);\n    recognitionRef.current = recognition;\n  }, [currentSpeaker]);\n  const handleStart = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n      setIsRecording(true);\n    }\n  };\n  const handleStop = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n  const toggleSpeaker = () => {\n    setCurrentSpeaker(prev => prev === \"Advisor\" ? \"Client\" : \"Advisor\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"enhanced-transcript\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u05EA\\u05DE\\u05DC\\u05D5\\u05DC \\u05E9\\u05D9\\u05D7\\u05D4 \\u05D1\\u05E9\\u05D9\\u05D3\\u05D5\\u05E8 \\u05D7\\u05D9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [!isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStart,\n        children: \"\\u05D4\\u05EA\\u05D7\\u05DC \\u05D4\\u05E7\\u05DC\\u05D8\\u05D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStop,\n        children: \"\\u05E2\\u05E6\\u05D5\\u05E8 \\u05D4\\u05E7\\u05DC\\u05D8\\u05D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleSpeaker,\n        children: [\"\\u05DE\\u05D3\\u05D1\\u05E8 \\u05E0\\u05D5\\u05DB\\u05D7\\u05D9: \", currentSpeaker === \"Advisor\" ? \"יועץ\" : \"לקוח\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"transcript-display\",\n      children: transcript.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `transcript-line ${line.speaker === \"Advisor\" ? \"advisor\" : \"client\"} ${line.regulatory ? \"regulatory\" : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"timestamp\",\n          children: [\"[\", line.timestamp.toLocaleTimeString(), \"]\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"speaker\",\n          children: [line.speaker, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text\",\n          children: line.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(EnhancedTranscript, \"HJX/vavb3oajNqgcJ3615DFXrFY=\");\n_c = EnhancedTranscript;\nexport default EnhancedTranscript;\nvar _c;\n$RefreshReg$(_c, \"EnhancedTranscript\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","regulatoryQuestions","EnhancedTranscript","_s","isRecording","setIsRecording","transcript","setTranscript","currentSpeaker","setCurrentSpeaker","recognitionRef","SpeechRecognition","window","webkitSpeechRecognition","console","warn","recognition","continuous","interimResults","lang","onresult","event","i","resultIndex","results","length","isFinal","text","trim","timestamp","Date","regulatory","some","q","includes","newLine","speaker","prev","onerror","e","error","current","handleStart","start","handleStop","stop","toggleSpeaker","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","line","index","toLocaleTimeString","_c","$RefreshReg$"],"sources":["/workspaces/movne-platform/movne-platform/client/src/EnhancedTranscript.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './EnhancedTranscript.css';\n\nconst regulatoryQuestions = [\n  \"האם חל שינוי במצבך הכלכלי?\",\n  \"האם יש צורך בנזילות כספית שונה?\",\n  \"האם אתה מודע לכך שקיימת לי זיקה לנכס זה?\"\n  // ניתן להוסיף שאלות נוספות\n];\n\nfunction EnhancedTranscript() {\n  const [isRecording, setIsRecording] = useState(false);\n  const [transcript, setTranscript] = useState([]);\n  const [currentSpeaker, setCurrentSpeaker] = useState(\"Advisor\"); // \"Advisor\" or \"Client\"\n  const recognitionRef = useRef(null);\n\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn(\"Web Speech API is not supported in this browser.\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = false; // מחכים לתוצאות סופיות\n    recognition.lang = 'he-IL';\n\n    recognition.onresult = (event) => {\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        if (event.results[i].isFinal) {\n          const text = event.results[i][0].transcript.trim();\n          const timestamp = new Date();\n          const regulatory = regulatoryQuestions.some(q => text.includes(q));\n          const newLine = { text, speaker: currentSpeaker, timestamp, regulatory };\n          setTranscript(prev => [...prev, newLine]);\n        }\n      }\n    };\n\n    recognition.onerror = (e) => console.error(\"Speech recognition error:\", e);\n\n    recognitionRef.current = recognition;\n  }, [currentSpeaker]);\n\n  const handleStart = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n      setIsRecording(true);\n    }\n  };\n\n  const handleStop = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  const toggleSpeaker = () => {\n    setCurrentSpeaker(prev => prev === \"Advisor\" ? \"Client\" : \"Advisor\");\n  };\n\n  return (\n    <div className=\"enhanced-transcript\">\n      <h3>תמלול שיחה בשידור חי</h3>\n      <div className=\"controls\">\n        {!isRecording ? (\n          <button onClick={handleStart}>התחל הקלטה</button>\n        ) : (\n          <button onClick={handleStop}>עצור הקלטה</button>\n        )}\n        <button onClick={toggleSpeaker}>\n          מדבר נוכחי: {currentSpeaker === \"Advisor\" ? \"יועץ\" : \"לקוח\"}\n        </button>\n      </div>\n      <div className=\"transcript-display\">\n        {transcript.map((line, index) => (\n          <div key={index} className={`transcript-line ${line.speaker === \"Advisor\" ? \"advisor\" : \"client\"} ${line.regulatory ? \"regulatory\" : \"\"}`}>\n            <span className=\"timestamp\">[{line.timestamp.toLocaleTimeString()}]</span>\n            <span className=\"speaker\">{line.speaker}:</span>\n            <span className=\"text\">{line.text}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default EnhancedTranscript;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}